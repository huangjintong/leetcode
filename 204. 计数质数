class Solution:
    def countPrimes(self, n: int) -> int:
        if n <= 2:
            return 0
        if n == 3:
            return 1
        sieve = bytearray([True]) * (n//2)
        for i in range(3,int(sqrt(n)) +1,2):
            if sieve[i//2]:
                sieve[i*i//2::i] = bytearray((n-i*i-1)//(2*i)+1)
        return len([2, *compress(range(3,n,2),sieve[1:])])
 
